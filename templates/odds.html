<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="IL9Cast - The Model">
    <title>The Model - IL9Cast</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@400;500;600&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='landing-style.css') }}">
</head>
<body class="dark-mode">
    <canvas id="grid-canvas"></canvas>

    <div class="site-content">
        <header>
            <a href="/" class="logo">IL9<span>Cast</span></a>
            <nav>
                <a href="/">Home</a>
                <a href="/markets">Markets</a>
                <a href="/odds" class="active">Model</a>
                <a href="/fundraising">Fundraising</a>
                <a href="/methodology">Methodology</a>
                <a href="/about">About</a>
                <a href="https://github.com/de-bayes/IL9" target="_blank" rel="noopener noreferrer" class="github-link" title="View on GitHub">GitHub</a>
            </nav>
        </header>

        <section class="hero">
            <h1>The Model</h1>
        </section>

        <section class="model-content-page">
            <article class="model-statement-section">
                <p class="model-statement">Because this district is like...super...super uncompetitive and boring, it's really hard to find data to build a model, but i'm working on it.</p>
            </article>

            <!-- Methodology Section -->
            <section class="methodology-section-model">
                <div class="methodology-header" onclick="toggleMethodology()">
                    <h2 style="margin: 0;">Methodology</h2>
                    <span class="toggle-icon" id="methodologyToggle">▼</span>
                </div>
                <div class="methodology-content hidden" id="methodologyContent">
                    <div class="methodology-explanation">
                        <h3>The Challenge of Modeling IL-9</h3>
                        <p>
                            Building a statistical forecasting model for the Illinois 9th District Democratic Primary presents unique challenges. Unlike highly competitive general elections, this race lacks the robust polling infrastructure and historical precedents that traditional models rely on.
                        </p>

                        <h3>Data Availability Issues</h3>
                        <ul class="method-list">
                            <li>No public district-level polling data available for the primary</li>
                            <li>Limited historical data on similar open-seat Democratic primaries in this district</li>
                            <li>Sparse demographic turnout models for primary elections vs. general elections</li>
                            <li>Candidate-specific metrics (endorsements, fundraising) updated infrequently</li>
                        </ul>

                        <h3>Model Development in Progress</h3>
                        <p>
                            The forecasting model is currently under development. Potential data sources being evaluated include:
                        </p>
                        <ul class="method-list">
                            <li>FEC fundraising reports (total raised, cash on hand, donor counts, burn rate)</li>
                            <li>Endorsement scores weighted by endorser influence and district relevance</li>
                            <li>Social media engagement metrics as proxies for grassroots support</li>
                            <li>Prior electoral performance in overlapping districts (where applicable)</li>
                            <li>Prediction market probabilities as an input signal (with appropriate weighting)</li>
                        </ul>

                        <h3>Why This Is Difficult</h3>
                        <p>
                            Traditional political forecasting models (like FiveThirtyEight's election models) combine polls, fundamentals, and historical trends. For IL-9, we lack the first two:
                        </p>
                        <ul class="method-list">
                            <li><strong>No Polls:</strong> Primary polls are expensive and rare for House races, especially in safe Democratic districts</li>
                            <li><strong>No Incumbent:</strong> With Jan Schakowsky retiring, there's no baseline approval rating or incumbency advantage to model</li>
                            <li><strong>Uncertain Turnout:</strong> Primary turnout models are harder to calibrate than general election models</li>
                        </ul>

                        <div class="methodology-note">
                            <strong>Status:</strong> The model is actively being developed. In the meantime, refer to the <a href="/markets" style="color: #e67e22; text-decoration: underline;">Markets page</a> for real-time prediction market aggregation, which reflects the collective wisdom of traders putting real money on the line.
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </div>

    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        .model-content-page {
            max-width: 900px;
            margin: 0 auto 4rem;
            padding: 0 2rem;
        }

        .model-statement-section {
            background: rgba(26, 26, 26, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 2px solid rgba(230, 126, 34, 0.3);
            border-radius: 12px;
            padding: 3rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .model-statement {
            font-size: 1.3rem;
            line-height: 1.8;
            color: #c0c0c0;
            font-weight: 400;
            margin: 0;
        }

        .methodology-section-model {
            background: rgba(26, 26, 26, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 2px solid rgba(230, 126, 34, 0.3);
            border-radius: 12px;
            padding: 0;
            margin-bottom: 2rem;
        }

        .methodology-header {
            padding: 2rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }

        .methodology-header:hover {
            background: rgba(230, 126, 34, 0.1);
        }

        .methodology-header h2 {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 2rem;
            color: #e67e22;
        }

        .toggle-icon {
            font-size: 1.5rem;
            color: #e67e22;
            transition: transform 0.3s ease;
        }

        .methodology-content {
            padding: 0 2rem 2rem;
            max-height: 2000px;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.3s ease;
        }

        .methodology-content.hidden {
            max-height: 0;
            padding: 0 2rem;
        }

        .methodology-explanation {
            line-height: 1.8;
        }

        .methodology-explanation h3 {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.4rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #e67e22;
        }

        .methodology-explanation h3:first-child {
            margin-top: 0;
        }

        .methodology-explanation p {
            margin-bottom: 1rem;
            color: #c0c0c0;
        }

        .method-list {
            list-style: none;
            padding-left: 0;
            margin: 1rem 0;
        }

        .method-list li {
            margin-bottom: 0.8rem;
            padding-left: 1.5rem;
            position: relative;
            line-height: 1.6;
            color: #c0c0c0;
        }

        .method-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #e67e22;
        }

        .methodology-note {
            background: rgba(230, 126, 34, 0.1);
            border-left: 4px solid #e67e22;
            padding: 1rem 1.5rem;
            margin-top: 2rem;
            border-radius: 4px;
        }
    </style>

    <script>
        function toggleMethodology() {
            const content = document.getElementById('methodologyContent');
            const icon = document.getElementById('methodologyToggle');
            content.classList.toggle('hidden');
            icon.textContent = content.classList.contains('hidden') ? '▼' : '▲';
        }

        // GRID BACKGROUND - Static, no mouse interaction
        const canvas = document.getElementById('grid-canvas');
        const ctx = canvas.getContext('2d');
        const gridSize = 40;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            drawGrid();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function drawGrid() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const isDarkMode = document.body.classList.contains('dark-mode');
            ctx.strokeStyle = isDarkMode ? 'rgba(255, 255, 255, 0.08)' : 'rgba(0, 0, 0, 0.055)';
            ctx.lineWidth = 1;

            // Draw horizontal lines
            for (let y = 0; y < canvas.height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // Draw vertical lines
            for (let x = 0; x < canvas.width; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
        }

        drawGrid();
    </script>
</body>
</html>
